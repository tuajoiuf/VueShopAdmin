{"remainingRequest":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\src\\views\\Home\\children\\goods\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\src\\views\\Home\\children\\goods\\List.vue","mtime":1604734255424},{"path":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr.卢\\WebstormProjects\\vueshop\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGlzdCIsCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgLy/mn6Xor6Llr7nlg48KICAgICAgcXVlcnlJbmZvOnsKICAgICAgICBxdWVyeTonJywKICAgICAgICBwYWdlbnVtOjEsCiAgICAgICAgcGFnZXNpemU6MTAKICAgICAgfSwKICAgICAgLy/llYblk4HliJfooagKICAgICAgZ29vZHNsaXN0OltdLAogICAgICAvL+aAu+adoeaVsAogICAgICB0b3RhbDowCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRHb29kc0xpc3QoKQogIH0sCiAgbWV0aG9kczp7CiAgICBhc3luYyBnZXRHb29kc0xpc3QoKSB7CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnZ29vZHMnLCB7CiAgICAgICAgcGFyYW1zOiB0aGlzLnF1ZXJ5SW5mbwogICAgICB9KQoKICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWVhuWTgeWIl+ihqOWksei0pe+8gScpCiAgICAgIH0KCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6I635Y+W5ZWG5ZOB5YiX6KGo5oiQ5Yqf77yBJykKICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgIHRoaXMuZ29vZHNsaXN0ID0gcmVzLmRhdGEuZ29vZHMKICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdTaXplKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VzaXplID0gbmV3U2l6ZQogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdQYWdlKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VudW0gPSBuZXdQYWdlCiAgICAgIHRoaXMuZ2V0R29vZHNMaXN0KCkKICAgIH0sCiAgICBhc3luYyByZW1vdmVCeUlkIChpZCkgewogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgKICAgICAgICAgICfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XllYblk4EsIOaYr+WQpue7p+e7rT8nLAogICAgICAgICAgJ+aPkOekuicsCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgfQogICAgICApLmNhdGNoKGVyciA9PiBlcnIpCgogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey57uP5Y+W5raI5Yig6Zmk77yBJykKICAgICAgfQoKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKGBnb29kcy8ke2lkfWApCgogICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5aSx6LSl77yBJykKICAgICAgfQoKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip/vvIEnKQogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgICB9LAogICAgZ29BZGRwYWdlKCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZ29vZHMvYWRkJykKICAgIH0KICB9Cn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/Home/children/goods","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 面包屑导航区域 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-card class=\"box-card\">\r\n      <el-row :gutter=\"20\">\r\n       <el-col :span=\"8\">\r\n         <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getGoodsList\">\r\n           <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getGoodsList\"></el-button>\r\n         </el-input>\r\n       </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"goAddpage\">添加商品</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n\r\n      <!-- table表格区域 -->\r\n      <el-table :data=\"goodslist\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"商品名称\" prop=\"goods_name\"></el-table-column>\r\n        <el-table-column label=\"商品价格(元)\" prop=\"goods_price\" width=\"95px\"></el-table-column>\r\n        <el-table-column label=\"商品重量\" prop=\"goods_weight\" width=\"70px\"></el-table-column>\r\n        <el-table-column label=\"创建时间\" prop=\"add_time\" width=\"140px\">\r\n          <template slot-scope=\"scope\">\r\n            {{scope.row.add_time | dateFormat}}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"130px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\"></el-button>\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeById(scope.row.goods_id)\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!--分页区域-->\r\n\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"queryInfo.pagenum\" :page-sizes=\"[5, 10, 15, 20]\" :page-size=\"queryInfo.pagesize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\" background>\r\n      </el-pagination>\r\n    </el-card>\r\n </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"List\",\r\n    data(){\r\n      return {\r\n        //查询对像\r\n        queryInfo:{\r\n          query:'',\r\n          pagenum:1,\r\n          pagesize:10\r\n        },\r\n        //商品列表\r\n        goodslist:[],\r\n        //总条数\r\n        total:0\r\n      }\r\n    },\r\n    created() {\r\n      this.getGoodsList()\r\n    },\r\n    methods:{\r\n      async getGoodsList() {\r\n        const { data: res } = await this.$http.get('goods', {\r\n          params: this.queryInfo\r\n        })\r\n\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error('获取商品列表失败！')\r\n        }\r\n\r\n        this.$message.success('获取商品列表成功！')\r\n        console.log(res.data)\r\n        this.goodslist = res.data.goods\r\n        this.total = res.data.total\r\n      },\r\n      handleSizeChange(newSize) {\r\n        this.queryInfo.pagesize = newSize\r\n        this.getGoodsList()\r\n      },\r\n      handleCurrentChange(newPage) {\r\n        this.queryInfo.pagenum = newPage\r\n        this.getGoodsList()\r\n      },\r\n      async removeById (id) {\r\n        const confirmResult = await this.$confirm(\r\n            '此操作将永久删除该商品, 是否继续?',\r\n            '提示',\r\n            {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              type: 'warning'\r\n            }\r\n        ).catch(err => err)\r\n\r\n        if (confirmResult !== 'confirm') {\r\n          return this.$message.info('已经取消删除！')\r\n        }\r\n\r\n        const { data: res } = await this.$http.delete(`goods/${id}`)\r\n\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error('删除失败！')\r\n        }\r\n\r\n        this.$message.success('删除成功！')\r\n        this.getGoodsList()\r\n      },\r\n      goAddpage(){\r\n        this.$router.push('/goods/add')\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}